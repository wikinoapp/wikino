# サービスクラスの使用ガイドライン

## サービスクラスを使用すべき場合

- データベースへの永続化を伴う処理
- 複数のモデル/レコードにまたがる複雑なビジネスロジックで、かつ永続化を伴うもの
- トランザクション管理が必要な処理

## サービスクラスを使用すべきでない場合

- データベースへの永続化を伴わない処理
  - 例: 署名付きURL生成、データ変換、バリデーションのみ
  - 例: 外部APIとの連携処理（API呼び出しのみ）
- 単一のモデル/レコードに閉じた処理
  - これらはモデルやレコードのメソッドとして定義する

## 実装例

- ❌ 悪い例: `GenerateSignedUrlService` - 永続化なし、単純なURL生成
- ✅ 良い例: `AttachmentRecord#generate_signed_url` - レコードのメソッドとして定義
- ✅ 良い例: `Attachments::CreateService` - Attachmentレコードを永続化する処理
